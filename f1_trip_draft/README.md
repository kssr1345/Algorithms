# F1 Travel Tracker (Phase 2 + Phase 3 Draft)

This version now includes both requested phases:

- **Phase 2**: website workflow + saved draft dashboard
- **Phase 3**: live data enrichment (public holidays + weather) and persisted context

## Run the app

```bash
python3 f1_trip_draft/webapp.py
```

Open: `http://localhost:8765`

---

## What was completed

## ✅ Phase 2 (Website workflow)

- Web form to create trip draft input.
- "Save Draft + Generate" flow.
- Saved drafts panel with list + reload by draft ID.
- Recommendation panel with cost and score breakdowns.

## ✅ Phase 3 (Live enrichment + storage)

- Integrated **public holiday API** (`date.nager.at`) per destination country.
- Integrated **weather API** (`open-meteo.com`) per destination city.
- Recommendation generation enriches each destination with live context.
- Live context is saved in DB along with recommendation snapshot.

---

## Database details

Database file: `f1_trip_draft/f1_tracker.db`

Tables:

1. `trip_drafts`
   - stores user-entered draft profile payload
2. `recommendations`
   - stores generated ranked results
   - stores `context_json` (holiday/weather metadata used during generation)

---

## API endpoints

- `POST /api/drafts` — save new draft
- `GET /api/drafts` — list recent drafts
- `GET /api/drafts/{id}` — load one draft
- `POST /api/recommendations/generate` — generate recommendations for draft
- `GET /api/recommendations/{draft_id}` — get latest recommendation snapshot

---

## Notes about flights/hotels in Phase 3

- Holiday + weather are live APIs.
- Flight/hotel prices are currently generated by a **phase3 estimator** (deterministic market model) to keep this runnable without paid API keys.
- Next upgrade: plug in real flight/hotel providers behind the same backend route.

---

## C++ plan (as requested)

Python currently handles API + DB + orchestration.
If/when traffic grows, move only heavy scoring/ranking loops into C++ and call from Python, while keeping the web backend in Python.


## Real-time data answer

Yes — recommendation generation attempts to fetch **real-time** public holiday and weather data each run:
- Holidays: `date.nager.at`
- Weather: `open-meteo.com`

In the UI, the **Live data status** panel shows per-city live availability and generation timestamp.
If an API call fails (network/source issue), the app falls back to defaults and marks that city as unavailable for that source.
